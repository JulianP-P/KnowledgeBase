# Ссылки и указатели
Ссылка - переменная, связанная с другой переменной, называемой адресатом

При обращении к ссылке будет происходить обращение к адресату и наоборот. 

Ссылка - это адрес на описатель массива

В фортране нет указателей. Работа с ссылками удобнее чем с указателями. 

Ссылки позволяют создавать динамические структуры данных - списки, стеки, деревья, очереди.

Операция => прикрепление ссылки к адресату.
```
program prog
 integer, pointer :: p
 integer, target :: a
 a = 100
 p => a ! прикрепили ссылку к адресату
 write(*,*) p
 p = 100 ! a = 100
 a = 500 ! p = 500
end
```
Все изменения, происходящие с адресатом, дублируются в ссылке. 
**Используем в крайних случаях**

Рванный массив (jagged matrix) - длина каждого столбика может быть разной. Такая матрица не векторизуется.
```
type Cell
  real, pointer :: column(:)
end type Cell
type(Cell) :: matrix(:)
```
Функция associated(pt, addr) возвращает .TRUE.
если ссылка pt прикреплена к адресату addr

```
program prog
 integer, pointer :: p1, p2, p3
 integer, target :: a,b
 a = 100; b = 2; p1 => a; p2 => a
 write(*, *) associated(p1, p2) ! TRUE
 write(*, *) associated(p1)
 write(*, *) associated(p2, a)
 p1 => b
 write(*, *) associated(p3) ! FALSE
 write(*, *) associated(p1, p2)
 write(*, *) associated(p1, a)
end
```

`deallocate` - освобождение данных

Ссылки в отчие от размещяемях объектов не являются автоматическими, то есть при выходе из зоны видимости ссылки, данные сохранятся.

Оператор `nullify` - открепление ссылки от адресата.
```
program prog
 integer, pointer :: p1, p2
 integer, target :: a
 a = 1000; p1 => a; p2 => a
 ! если к адресату прикреплены две ссылки,
 ! то отсоединим последнюю
 if (associated(p1, p2)) nullify(p2)
 write(*,*) associated(p1), associated(p2) ! T, F
end
```

Когда ссылка оператором прикрепляется к другой ссылке, то это значит, что она ссылается на первоначальную область в память (туда же кужа сслыается вторая сслыка)
```
function select (switch, left, right)
 real, pointer :: select, left, right
 logical switch
 if (switch) then
 select => left
 else
 select => right
 end if
end function select
new_arrow => select(a > b,old_arrow,null())
```

Список - это ссылка на первый элемент

Нисходящее программирование:
- заводим переменные для головной программы - компилируем
- пишем все процедуры головной программы, но там не операторов исполнения - компилируем
- описываем процедуры

Очередь - это список, в который элементы добавляются в конец, а забираются из начала
Стек - это список, в котором элементы добавляются и забираются из конца.

# Базы данных
**База данных** — совокупность данных, организованных в соответствии с концептуальной структурой, которая описывает
характеристики этих данных и взаимоотношения между ними.
Основная функция базы данных — предоставление единого хранилища для всей информации.
____
## Архитектурные модели
#### Централизованная
Система состоит из центрального компьютера и подключенных к нему терминалов.
Вся обработка данных выполняется в рамках этого единственного компьютера.
Пользовательские терминалы не обладают вычислительными мощностями и являются простым интерфейсом.
#### Файл — сервер
В архитектуре «файл-сервер»  средства организации и управления БД (в том числе СУБД) располагаются на машине клиента, а БД, представляющая собой набор специализированных файлов, – на машине-сервере.
Фактически, файловый сервер используется просто как общий жесткий диск.
#### Клиент – сервер
Данная архитектура предполагает, что СУБД находится на сервере, и только она имеет доступ к файлам БД.
На клиентских компьютерах работают пользовательские приложения и клиентские компоненты СУБД, осуществляющие взаимодействие с сервером. От клиента на сервер приходят запросы, которые обрабатываются СУБД, и результат отправляется обратно клиенту.
____
## СУБД
СУБД — это программа, с помощью которой осуществляется хранение, обработка, управление и поиск информации в базе данных.
#### Виды СУБД
- **Реляционные**. Отношения между данными являются реляционными, и данные хранятся в виде таблиц.
- **Объектно-ориентированные**. Данные представлены в виде объектов, их атрибутов, методов и классов.
- **NoSQL**
    - Иерархические. В иерархической модели данные организованы в древовидную структуру. Записи связаны друг с другом через связи в отношениях родитель-потомок.
    - Графовые. Данные хранятся в виде узлов, ребер и свойств. Узел представляет собой объект. Ребро представляет собой отношение, которое соединяет узлы. Свойства — это дополнительная информация, добавляемая к узлам.
    - Сетевые. Сетевые базы данных имеют иерархическую структуру, но в отличие от иерархических баз данных, где у одного дочернего элемента может быть только один родитель, сетевой узел может иметь отношения с несколькими объектами.
    - Документо-ориентированные. Каждый документ представляет данные в виде ключ-значение, связь с другими документами и мета-полями.
    - Ключ-значение. База данных на основе пар «ключ‑значение» хранит данные как совокупность пар «ключ‑значение», в которых ключ служит уникальным идентификатором.
    - Column-oriented. В таких системах данные хранятся в виде матрицы, строки и столбцы которой используются как ключи.
    - LDAP. Lightweight Directory Access Protocol — это открытый и кроссплатформенный протокол, используемый для аутентификации служб каталогов.
#### Реляционная модель
- Клиентска часть. Включает клиентское приложение и библиотеку LIBPQ, реализующую интерфейс связи с сервером. Библиотека LIBPQ отвечает за установление соединения с сервером и передачу SQL запросов.
- Серверная часть. Включает серверные процессы и контролирующий процесс-демон Postmaster. Postmaster авторизует и принимает запросы от клиентов. После того как клиент соединяется с сервером, процесс postmaster создает серверный процесс (используется связь один-к-одному), и дальше клиент работает уже с ним. На каждое соединение создается по серверному процессу, поэтому при большом числе соединений следует использовать пул (расширение pgbouncer).

Postmaster также запускает ряд служебных процессов, увидеть которые можно с помощью команды ps fax.
##### Процессы и память
В обще памяти находится:
- буферный кэш (большая часть общей памяти). Он нужен для ускорения работы с данными на диске.
- информация о блокировках 
- и многое другое, через нее же серверные процессы общаются друг с другом.
У каждого серверного процесса есть своя локальная память. В ней находится:
- кэш каталога (часто используемая информация о базе данных)
- планы запросов
- рабочее пространство для выполнения запросов
- и другое.

##### Буферный кэш
Используется для оптимизации скорости работы памяти и дисков. Он
состоит из массива буферов, которые содержат блоки данных и
дополнительную информацию об этих блоках.
Размер блока обычно составляет 8 КБ, но может устанавливаться при
сборке.
Буферный кэш, как и другие структуры в памяти, защищен
блокировками от одновременного доступа. Блокировки
организованы достаточно эффективно, чтобы не создавать большой
конкуренции.
